<form class="barcode-form" [formGroup]="form" novalidate>
  <div class="form-header">
    <label for="barcodeInput">Código de barras</label>
  </div>

  <div class="input-group" [class.invalid]="shouldShowErrors && form.get('barcode')?.invalid">
    <input
      id="barcodeInput"
      type="text"
      name="barcode"
      formControlName="barcode"
      inputmode="numeric"
      pattern="\d*"
      maxlength="48"
      (input)="onInputChange()"
      (blur)="onBlur()"
      placeholder="Insira aqui o código de barras do seu tributo ou taxa"
    />
    <i class="fa-solid fa-barcode"></i>
  </div>

  <ng-container *ngIf="shouldShowErrors && form.get('barcode')?.errors">
    <small class="error-text" *ngIf="form.get('barcode')?.hasError('required')">
      Informe o código de barras.
    </small>
    <small class="error-text" *ngIf="form.get('barcode')?.hasError('pattern')">
      O campo aceita apenas números.
    </small>
    <small class="error-text" *ngIf="form.get('barcode')?.hasError('minlength')">
      Código deve ter no mínimo 44 dígitos.
    </small>
    <small class="error-text" *ngIf="form.get('barcode')?.hasError('maxlength')">
      Código deve ter no máximo 48 dígitos.
    </small>
  </ng-container>

  <small class="help-text">Aceitamos tributos municipais, estaduais, federais e diversas taxas.</small>

  <div class="button-group">
    <button
      type="button"
      class="btn primary-btn"
      [disabled]="form.invalid"
      [class.ready]="form.valid"
      (click)="consultBoleto()"
    >
      Consultar boleto
    </button>
  </div>

  <button type="button" class="btn secondary-btn" (click)="clearField()">
    <i class="fa-solid fa-xmark"></i>
    Limpar campo
  </button>

  <div class="secure-row">
    <i class="fa-solid fa-shield-halved"></i>
    <span>Seus dados estão protegidos com criptografia de ponta</span>
  </div>

  <div class="badge-row">
    <div class="badge pci-badge">
      <i class="fa-solid fa-shield-halved pci-icon"></i>
      <div class="badge-text">
        <strong>PCI DSS</strong>
        <small>Certificado</small>
      </div>
    </div>
    <div class="badge">
      <i class="fa-solid fa-lock"></i>
      <div class="badge-text">
        <strong>SSL Secure</strong>
        <small>256-bit</small>
      </div>
    </div>
    <div class="badge">
      <i class="fas fa-fingerprint"></i>
      <div class="badge-text">
        <strong>Criptografia</strong>
        <small>Avançada</small>
      </div>
    </div>
  </div>
</form>
