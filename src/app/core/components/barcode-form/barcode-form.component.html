<form nz-form nzLayout="vertical" class="barcode-form" [formGroup]="form" novalidate>
  <nz-form-item class="form-item">
    <nz-form-label nzFor="barcodeInput">
      <span class="form-label">Código de barras</span>
    </nz-form-label>
    <nz-form-control [nzValidateStatus]="shouldShowErrors ? barcodeControl : ''" [nzErrorTip]="barcodeErrors">
      <div class="input-group" [class.invalid]="shouldShowErrors && form.get('barcode')?.invalid">
        <input
          id="barcodeInput"
          nz-input
          type="text"
          name="barcode"
          formControlName="barcode"
          inputmode="numeric"
          pattern="\d*"
          maxlength="48"
          (input)="onInputChange()"
          (blur)="onBlur()"
          placeholder="Insira aqui o código de barras do seu tributo ou taxa"
        />
        <i class="fa-solid fa-barcode"></i>
      </div>
    </nz-form-control>
  </nz-form-item>

  <ng-template #barcodeErrors>
    <ng-container *ngIf="shouldShowErrors && form.get('barcode')?.errors">
      <small class="error-text" *ngIf="form.get('barcode')?.hasError('required')">
        Informe o código de barras.
      </small>
      <small class="error-text" *ngIf="form.get('barcode')?.hasError('pattern')">
        O campo aceita apenas números.
      </small>
      <small class="error-text" *ngIf="form.get('barcode')?.hasError('minlength')">
        Código deve ter no mínimo 44 dígitos.
      </small>
      <small class="error-text" *ngIf="form.get('barcode')?.hasError('maxlength')">
        Código deve ter no máximo 48 dígitos.
      </small>
    </ng-container>
  </ng-template>

  <small class="help-text">Aceitamos tributos municipais, estaduais, federais e diversas taxas.</small>

  <div class="button-group">
    <button
      type="button"
      nz-button
      nzType="primary"
      class="btn primary-btn"
      [disabled]="form.invalid"
      [class.ready]="form.valid"
      (click)="consultBoleto()"
    >
      Consultar boleto
    </button>
  </div>

  <button type="button" nz-button nzType="default" class="btn secondary-btn" (click)="clearField()">
    <i class="fa-solid fa-xmark"></i>
    Limpar campo
  </button>

  <div class="secure-row">
    <i class="fa-solid fa-shield-halved"></i>
    <span>Seus dados estão protegidos com criptografia de ponta</span>
  </div>

  <div #badgeSentinel class="badge-sentinel" aria-hidden="true"></div>

  <div class="badge-row" *ngIf="badgesVisible" @badgeStagger>
    <div class="badge pci-badge">
      <i class="fa-solid fa-shield-halved pci-icon"></i>
      <div class="badge-text">
        <strong>PCI DSS</strong>
        <small>Certificado</small>
      </div>
    </div>
    <div class="badge">
      <i class="fa-solid fa-lock"></i>
      <div class="badge-text">
        <strong>SSL Secure</strong>
        <small>256-bit</small>
      </div>
    </div>
    <div class="badge">
      <i class="fas fa-fingerprint"></i>
      <div class="badge-text">
        <strong>Criptografia</strong>
        <small>Avançada</small>
      </div>
    </div>
  </div>
</form>
